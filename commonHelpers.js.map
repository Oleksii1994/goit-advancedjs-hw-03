{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_KDjowYAaFCSgvZaRHoH7SlZdcXdU0AmY9ho0T0LOMwznNJeRDQUi51iP6oVW60Xc';\n\nexport function fetchBreeds() {\n  return axios.get('https://api.thecatapi.com/v1/breeds').then(response => {\n    if (!response.data) {\n      throw new Error();\n    }\n\n    return response.data;\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  return axios\n    .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(response => {\n      if (!response.data) {\n        throw new Error();\n      }\n      return response.data;\n    });\n}\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api';\n\nconst loader = document.querySelector('.loader');\nconst select = document.querySelector('.breed-select');\nconst catInfoBox = document.querySelector('.cat-info');\n\nlet isFirstSelect = true;\n\nloader.classList.remove('is-hidden');\n\nselect.addEventListener('change', onChange);\n\nfetchBreeds()\n  .then(dataFromApi => {\n    if (!dataFromApi) {\n      select.classList.add('is-hidden');\n      loader.classList.add('is-hidden');\n      throw new Error();\n    }\n    const newSelect = new SlimSelect({\n      select: '#single',\n\n      data: dataFromApi.map(breed => ({ text: breed.name, value: breed.id })),\n    });\n\n    loader.classList.add('is-hidden');\n    select.classList.remove('is-hidden');\n  })\n  .catch(error => {\n    console.log(error.message);\n    loader.classList.add('is-hidden');\n    select.classList.add('is-hidden');\n    iziToast.error({\n      message: 'Oops! Something went wrong! Try to reload the page!',\n      position: 'topRight',\n    });\n  });\n\nfunction onChange(event) {\n  event.preventDefault();\n  loader.classList.remove('is-hidden');\n  catInfoBox.innerHTML = '';\n\n  if (isFirstSelect) {\n    isFirstSelect = false;\n    return;\n  }\n\n  const { value } = event.currentTarget;\n  fetchCatByBreed(value)\n    .then(data => {\n      if (!data) {\n        loader.classList.add('is-hidden');\n        throw new Error();\n      }\n      catInfoBox.insertAdjacentHTML('beforeend', createBreedCardMarkup(data));\n      catInfoBox.classList.remove('is-hidden');\n      loader.classList.add('is-hidden');\n    })\n    .catch(error => {\n      console.log(error.message);\n      loader.classList.add('is-hidden');\n      iziToast.error({\n        message:\n          'Oops! Something went wrong! Try to search another breed or reload the page',\n        position: 'topRight',\n      });\n    });\n}\n\nfunction createBreedCardMarkup(data) {\n  const { url } = data[0];\n  const { description, name, temperament } = data[0].breeds[0];\n\n  const markup = `<img src=\"${url}\" alt=\"${name} cat\" width=\"400\" height=\"auto\"/><div class=\"breed-text-info\"><h1>${name}</h1><p class=\"description\">${description}</p><p><strong>Temperament:</strong> ${temperament}</p></div>`;\n  return markup;\n}\n"],"names":["axios","fetchBreeds","response","fetchCatByBreed","breedId","loader","select","catInfoBox","isFirstSelect","onChange","dataFromApi","SlimSelect","breed","error","iziToast","event","value","data","createBreedCardMarkup","url","description","name","temperament"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,SAASC,GAAc,CAC5B,OAAOD,EAAM,IAAI,qCAAqC,EAAE,KAAKE,GAAY,CACvE,GAAI,CAACA,EAAS,KACZ,MAAM,IAAI,MAGZ,OAAOA,EAAS,IACpB,CAAG,CACH,CAEO,SAASC,EAAgBC,EAAS,CACvC,OAAOJ,EACJ,IAAI,wDAAwDI,GAAS,EACrE,KAAKF,GAAY,CAChB,GAAI,CAACA,EAAS,KACZ,MAAM,IAAI,MAEZ,OAAOA,EAAS,IACtB,CAAK,CACL,CCnBA,MAAMG,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,SAAS,cAAc,eAAe,EAC/CC,EAAa,SAAS,cAAc,WAAW,EAErD,IAAIC,EAAgB,GAEpBH,EAAO,UAAU,OAAO,WAAW,EAEnCC,EAAO,iBAAiB,SAAUG,CAAQ,EAE1CR,EAAa,EACV,KAAKS,GAAe,CACnB,GAAI,CAACA,EACH,MAAAJ,EAAO,UAAU,IAAI,WAAW,EAChCD,EAAO,UAAU,IAAI,WAAW,EAC1B,IAAI,MAEM,IAAIM,EAAW,CAC/B,OAAQ,UAER,KAAMD,EAAY,IAAIE,IAAU,CAAE,KAAMA,EAAM,KAAM,MAAOA,EAAM,EAAI,EAAC,CAC5E,CAAK,EAEDP,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAO,UAAU,OAAO,WAAW,CACvC,CAAG,EACA,MAAMO,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBR,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAO,UAAU,IAAI,WAAW,EAChCQ,EAAS,MAAM,CACb,QAAS,sDACT,SAAU,UAChB,CAAK,CACL,CAAG,EAEH,SAASL,EAASM,EAAO,CAKvB,GAJAA,EAAM,eAAc,EACpBV,EAAO,UAAU,OAAO,WAAW,EACnCE,EAAW,UAAY,GAEnBC,EAAe,CACjBA,EAAgB,GAChB,MACD,CAED,KAAM,CAAE,MAAAQ,CAAK,EAAKD,EAAM,cACxBZ,EAAgBa,CAAK,EAClB,KAAKC,GAAQ,CACZ,GAAI,CAACA,EACH,MAAAZ,EAAO,UAAU,IAAI,WAAW,EAC1B,IAAI,MAEZE,EAAW,mBAAmB,YAAaW,EAAsBD,CAAI,CAAC,EACtEV,EAAW,UAAU,OAAO,WAAW,EACvCF,EAAO,UAAU,IAAI,WAAW,CACtC,CAAK,EACA,MAAMQ,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBR,EAAO,UAAU,IAAI,WAAW,EAChCS,EAAS,MAAM,CACb,QACE,6EACF,SAAU,UAClB,CAAO,CACP,CAAK,CACL,CAEA,SAASI,EAAsBD,EAAM,CACnC,KAAM,CAAE,IAAAE,CAAG,EAAKF,EAAK,GACf,CAAE,YAAAG,EAAa,KAAAC,EAAM,YAAAC,CAAa,EAAGL,EAAK,GAAG,OAAO,GAG1D,MADe,aAAaE,WAAaE,sEAAyEA,gCAAmCD,yCAAmDE,aAE1M"}